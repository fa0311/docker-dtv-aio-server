server {
  listen 80;
  server_name _;

  # 既定 index.html 回避のため /srv/www をルートに
  root /srv/www;

  # ---- 文字化け対策 ----
  charset utf-8;
  charset_types text/plain text/html application/json;

  # ---- 大容量/動画向けチューニング ----
  sendfile on;
  tcp_nopush on;
  tcp_nodelay on;
  keepalive_timeout 65s;

  aio threads;
  directio 8m;
  output_buffers 1 512k;

  # ※ mime.types は http で既に include 済み。ここでは書かない
  gzip off;
  etag on;

  # ディレクトリ一覧
  autoindex on;
  autoindex_exact_size off;
  autoindex_localtime on;
  autoindex_format html;

  location / {
    try_files $uri $uri/ =404;
  }

  # MP4の疑似ストリーミング（mkv等は通常のRangeでOK）
  location ~ \.mp4$ {
    mp4;
    mp4_buffer_size 1m;
    mp4_max_buffer_size 5m;
  }
}
